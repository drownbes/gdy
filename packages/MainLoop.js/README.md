Typescript rewrite of https://github.com/IceCreamYou/MainLoop.js
